{% extends "base.html" %}
{% load static %}
{% load date_filters %}
{% load ui_template_tag %}
{% load widget_tweaks %}
{% block breadcrumbs %}
    {% breadcrumbs 'عملیات ارزی' '#' 'تخصیص ارز' '#' 'درخواست تخصیص ارز' '#' %}
{% endblock breadcrumbs %}
{% block title %}
    پرونده ثبت سفارش
{% endblock title %}
{% block page-title %}
    درخواست تخصیص ارز
{% endblock page-title %}
{% block head %}
    <link href="{% static 'selectize-master/css/selectize.css' %}"
          rel="stylesheet">
    <link href="{% static 'bootstrap-datepicker/css/bootstrap-datepicker.min.css' %}"
          rel="stylesheet">
{% endblock head %}
{% block main %}
    <div class="container-fluid bg-white py-4">
        <div class="row">
            <div class="col-12 col-md-6">
                <div class="row">
                    {% input_box 'شماره پرونده' object.main_data.identifier disabled=True div_with='col-12 col-md-6' %}
                    {% input_box 'شماره ثبت سفارش' object.main_data.registrations_number disabled=True div_with='col-12 col-md-6' %}
                </div>
            </div>
            <div class="col-12 col-md-6">
                <div class="row">
                    {% input_box 'شماره ردیف' ۱ disabled=True div_with='col-12 col-md-6' %}
                    {% input_box 'نسخه' ۱ disabled=True div_with='col-12 col-md-6' %}
                </div>
            </div>
            <div class="col-12 col-md-6">
                <div class="row">
                    {% input_box 'وضعیت' object.get_status_display disabled=True div_with='col-12 col-md-6' %}
                    {% input_box 'فرآیند فعلی' 'اتمام' disabled=True div_with='col-12 col-md-6' %}
                </div>
            </div>
            <div class="col-12 col-md-6">
                <div class="row">
                    {% input_box 'مبلغ درخواست ارز' object.request_amount disabled=True div_with='col-12 col-md-6' %}
                    {% input_box 'ارز درخواست' object.currency disabled=True div_with='col-12 col-md-6' %}
                </div>
            </div>
            <div class="col-12 col-md-6">
                <div class="row">
                    {% input_box 'مبلغ به ارز ثبت سفارش' object.request_amount_by_main_data_currency disabled=True div_with='col-12 col-md-6' %}
                    {% input_box 'ارز ثبت سفارش' object.main_data.financial.currency_type disabled=True div_with='col-12 col-md-6' %}
                </div>
            </div>
            <div class="col-12 col-md-6">
                <div class="row">
                    {% input_box 'نام بانک' object.main_data.financial.bank disabled=True div_with='col-12 col-md-6' %}
                    {% input_box 'نام شعبه'  object.main_data.financial.bank_branch disabled=True div_with='col-12 col-md-6' %}
                </div>
            </div>
            <div class="col-12 col-md-6">
                <div class="row">
                    {% input_box 'شماره درخواست بازرگانی' '-' disabled=True div_with='col-12 col-md-6' %}
                    {% input_box 'تاریخ ایجاد'  object.created_at|to_jalali disabled=True div_with='col-12 col-md-6' %}
                </div>
            </div>
            <div class="col-12 col-md-6">
                <div class="row">
                    {% input_box 'تاریخ تخصیص' object.created_at|to_jalali disabled=True div_with='col-12 col-md-6' %}
                    {% input_box 'تاریخ تایید' object.created_at|to_jalali disabled=True div_with='col-12 col-md-6' %}
                </div>
            </div>
            <div class="col-12">
                <div class="input-group mb-3">
                    <span class="input-group-text">پاسخ بانک</span>
                    <textarea class="form-control" aria-label="With textarea" disabled></textarea>
                </div>
            </div>
            <div class="col-12">
                <div class="row">
                    {% input_box 'نوع معامله' object.transaction_type.title disabled=True div_with='col-12 col-md-6 col-lg-4' %}
                    {% input_box 'متعهد' object.undertaking.title disabled=True div_with='col-12 col-md-6 col-lg-4' %}
                    {% input_box 'محل تسهیلات' object.facility_location.title  disabled=True div_with='col-12 col-md-6 col-lg-4' %}
                </div>
            </div>
            <div class="col-12">
                <div class="row">
                    {% input_box 'مهلت باز پرداخت' object.repayment_deadline.title disabled=True div_with='col-12 col-md-6 col-lg-4' %}
                    {% input_box 'محل تامین ارز' object.supply_currency_place.title disabled=True div_with='col-12 col-md-6 col-lg-4' %}
                    {% input_box 'نرخ ارز' object.currency_rate.title disabled=True div_with='col-12 col-md-6 col-lg-4' %}
                </div>
            </div>
            <div class="col-12">
                <div class="row">
                    {% input_box 'نوع درخواست' object.request_type.title disabled=True div_with='col-12 col-md-6 col-lg-4' %}
                    {% input_box 'مهلت به ماه' object.duration_per_month disabled=True div_with='col-12 col-md-6 col-lg-4' %}
                    {% input_box 'مهلت انقضا به روز' object.expire_date disabled=True div_with='col-12 col-md-6 col-lg-4' %}
                </div>
            </div>
            {% input_box 'تعرفه هزینه‌های مالی' '' disabled=True div_with='col-12 col-md-6' %}
            {% input_box 'شرح هزینه‌های مالی' ''  disabled=True div_with='col-12 col-md-6' %}
            <div class="col-12 col-md-6">
                <div class="input-group mb-3">
                    <span class="input-group-text"><small>منابع تامین شده‌ی درخواست به ارز درخواست</small></span>
                    <textarea class="form-control" aria-label="With textarea" disabled></textarea>
                </div>
            </div>
            <div class="col-12 col-md-6">
                <div class="input-group mb-3">
                    <span class="input-group-text"><small>اولویت درخواست از نظر دستگاه مجوز دهنده</small></span>
                    <textarea class="form-control" aria-label="With textarea" disabled></textarea>
                </div>
            </div>
            <div class="col-12">
                <table class="table table-striped table-hover table-bordered text-center table-responsive mt-4 d-table">
                    <thead class="text-white bg-navy">
                        <tr class="bg-navy">
                            <th>ردیف</th>
                            <th>نام سند</th>
                            <th>پسوند فایل</th>
                            <th>عملیات</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="file-container">
                            <td>1</td>
                            <td>{{ object.document_name }}</td>
                            <td>{{ object.document_extension }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            {% if not object.document %}
                <div class="col-12">
                    <div class="m-3 text-center" id="empty-table-alert">
                        <svg width="64"
                             height="41"
                             viewBox="0 0 64 41"
                             xmlns="http://www.w3.org/2000/svg">
                            <title>No data</title>
                            <g transform="translate(0 1)" fill="none" fill-rule="evenodd">
                            <ellipse fill="#f5f5f5" cx="32" cy="33" rx="32" ry="7"></ellipse>
                            <g fill-rule="nonzero" stroke="#d9d9d9">
                            <path d="M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z">
                            </path>
                            <path d="M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z" fill="#fafafa">
                            </path>
                            </g>
                            </g>
                        </svg>
                        <p class="mt-3">
                            <small class="pt-3">موجود نیست</small>
                        </p>
                    </div>
                </div>
            {% endif %}
        </div>
        <div class="d-md-flex justify-content-between">
            <div class="d-flex justify-content-start">
                <div class="mt-2">
                    <a href="{% url 'currency_allocation:update' object.pk %}"
                       class="me-2 btn btn-primary btn-maya">
                        <i class="fa fa-edit"></i>
                        <span class="ps-1">ویرایش</span>
                    </a>
                </div>
                <div class="mt-2">
                    <a href="{% url 'currency_allocation:decomposition' object.pk %}"
                       class="me-2 btn btn-primary btn-maya">
                        <i class="fa fa-cubes"></i>
                        <span class="ps-1">تجزیه</span>
                    </a>
                </div>
                <div class="mt-2">
                    <a href="#" class="me-2 btn btn-primary btn-maya">
                        <i class="fa fa-refresh"></i>
                        <span class="ps-1">تمدید</span>
                    </a>
                </div>
                <div class="mt-2">
                    <button type="button"
                            class="btn btn-danger btn-cinnabar"
                            class="btn btn-danger btn-cinnabar"
                            data-bs-toggle="modal"
                            data-bs-target="#currency-request-cancelation">
                        <i class="fa fa-times-circle"></i>
                        <span class="ps-1">ابطال</span>
                    </button>
                    <!-- Origin canceleation Modal -->
                    <div class="modal fade"
                         id="currency-request-cancelation"
                         tabindex="-1"
                         aria-labelledby="currency-request-cancelationLabel"
                         aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="currency-request-cancelationLabel">ابطال منشا ارز</h1>
                                    <button type="button"
                                            class="btn-close"
                                            data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <p>آیا از ابطال تخصیص ارز با شماره پرونده {{ object.file_number }} مطمئن هستید؟</p>
                                </div>
                                <div class="modal-footer">
                                    <form method="post"
                                          action="{% url 'currency_allocation:update_status' object.pk %}">
                                        {% csrf_token %}
                                        <input type="hidden" value="c" name="status">
                                        <button type="submit" class="btn btn-secondary rounded-2px">بله</button>
                                        <button type="button"
                                                class="btn btn-primary btn-maya"
                                                data-bs-dismiss="modal">خیر</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-2">
                    <a href="#" class="me-2 btn btn-orange  btn-maya">
                        <i class="fa fa-long-arrow-down"></i>
                        <span class="ps-1">کاهش</span>
                    </a>
                </div>


                 <div class="mt-2">
                    <a href="#" class="me-2 btn btn-primary  btn-maya">
                        <i class="fa fa-refresh"></i>
                        <span class="ps-1"> بروز رسانی و ثبت </span>
                    </a>
                </div>


            </div>
            <div class="mt-2">
                <button type="button" class="btn btn-success btn-forest px-3 me-2">
                    <i class="fa fa-info" aria-hidden="true"></i>
                </button>
                <a href="{% url 'currency_allocation:requests' %}"
                   class="btn btn-primary btn-maya">
                    <i class="fa fa-arrow-right"></i>
                    <span class="ps-1">بازگشت</span>
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock main %}
