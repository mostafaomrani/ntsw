{% extends "base.html" %}
{% load static %}
{% load date_filters %}
{% load ui_template_tag %}
{% load widget_tweaks %}
{% block breadcrumbs %}
{% breadcrumbs 'عملیات پایه' '#' 'معرفی نمایندگان' '#' %}
{% endblock breadcrumbs %}
{% block title %}
پرونده ثبت سفارش
{% endblock title %}
{% block page-title %}
معرفی نمایندگان
{% endblock page-title %}
{% block head %}
<link href="{% static 'selectize-master/css/selectize.css' %}" rel="stylesheet">
<link href="{% static 'bootstrap-datepicker/css/bootstrap-datepicker.min.css' %}" rel="stylesheet">
{% endblock head %}
{% block main %}
<div class="container-fluid bg-white py-4">
    <form methode="get" action="{% url 'currency_allocation:create_request' %}" class="mb-3">
        <div class="row">

            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 box-bordered-bottom-dashed">
                <div class="d-md-flex">
                    <div class="m-2">
                        <button type="submit" class="btn btn-primary btn-maya">
                            <i class="fa fa-plus-square"></i>
                            <span class="ps-1">  نماینده جدید</span>
                        </button>
                    </div>

                </div>
            </div>

            <div class=" col-lg-2 col-md-2"></div>

            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div style="float: left" class="form-inline">
                                    
                                    <div class="form-group ">
                                        <div class="input-group">

                                            <input name="searchTerm" id="searchTerm" type="text" class="form-control search-box" onkeydown="return (event.keyCode != 13);" placeholder="متن جستجو">
                                        </div>
                                    </div>

                                    
                                    <div class="form-group">
                                        <button type="button" id="btnSearchInitialInventory" name="btnSearchInitialInventory" class="btn btn-blue active"><i class="fa fa-search"></i>جستجو</button>
                                    </div>
                                    <div class="form-group">
                                        <button type="button" id="btnLagveInitialInventory" name="btnLagveInitialInventory" class="btn btn-warning active"><i class="fa fa-remove"></i>لغو فیلتر</button>
                                    </div>
                                </div>
                            </div>
        </div>

    </form>
    <div class="border shadow-sm">
        <div class="row py-3">


        </div>
        <table class="table table-striped table-hover table-bordered text-center">
            <thead class="text-white bg-navy">
                <tr class="bg-themeprimary" role="row">
                    <th >ردیف</th>
                    <th ">شماره  نمایندگی </th>
                    <th >نام  نماینده </th>
                    <th ">نقش  اعطاکننده</th>
                    <th ">سطح دسترسی</th>
                    <th >تاریخ     شروع</th>
                    <th >تاریخ   پایان</th>
                    <th >وضعیت</th>
                    <th ">عملیات</th>
                </tr>
            </thead>
            <tbody>
                {% for r in object_list %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ r.main_data }}</td>
                    <td>{{ r.row }}</td>
                    <td>{{ r.get_status_display }}</td>
                    <td>
                        {% if r.parent_request %}
                        تجزیه
                        {% else %}
                        اتمام
                        {% endif %}
                    </td>
                    <td>{{ r.request_amount }}</td>
                    <td>{{ r.currency }}</td>
                    <td>{{ r.created_at|to_jalali }}</td>
                    <td>{{ r.supply_currency_place.title }}</td>
                    <td>{{ r.currency_rate.title }}</td>
                    <td>{{ r.request_type.title }}</td>
                    <td>
                        {% if r.main_data.financial.bank %}{{ r.main_data.financial.bank }}{% endif %}
                    </td>
                    <td>{{ r.created_at|to_jalali }}</td>
                    <td>
                        <a class="btn btn-sm btn-primary btn-maya mx-auto"
                            href="{% url 'currency_allocation:request_detail' r.pk %}">
                            <i class="fa fa-search"></i>
                            <span class="ms-1">جزئیات</span>
                        </a>
                    </td>
                    <td>
                        <button class="btn btn-sm btn-primary btn-maya mx-auto" type="button">
                            <i class="fa fa-edit"></i>
                            <span class="ms-1">تاریخچه</span>
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock main %}
{% block js %}
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'selectize-master/js/selectize.min.js' %}"> </script>
<script>$('#id_main_data').selectize({})</script>

<style>
    .form-inline .form-group {
	display: inline-block;
	margin-bottom: 0;
	vertical-align: middle;
}

.btn-blue, .btn-blue:focus {
	background-color: #5db2ff !important;
	border-color: #5db2ff;
	color: #fff !important;
}

.btn.active, .btn:active {
	background-image: none;
	outline: 0;
	-webkit-box-shadow: inset 0 3px 5px rgba(0,0,0,.125);
	box-shadow: inset 0 3px 5px rgba(0,0,0,.125);
}


.btn-blue.active {
	background-color: #449cec !important;
	border-color: #3d90db;
}


</style>
{% endblock js %}